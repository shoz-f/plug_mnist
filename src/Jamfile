#
# ビルドルール
#
SubDir PROJ src ;

#
# アプリケーション依存のコマンド・オプション指定
#
C++  = g++ ;
LINK = g++ ;

#
# ビルドスクリプト
#
HDRS =
    $(WORK_HOME)/CImg-2.9.2
    $(WORK_HOME)/tensorflow_src
    $(WORK_HOME)/tensorflow_src/tensorflow/lite/tools/make/downloads/flatbuffers/include
;

C++FLAGS =
    -O3 -DNDEBUG -fPIC  --std=c++11  -fext-numeric-literals
;

DEFINES =
    __LITTLE_ENDIAN__ 
    TFLITE_WITHOUT_XNNPACK
;

LINKFLAGS +=
    -L/usr/local/lib
    -static
;

Main tfl_interp.exe :
	tfl_interp.cc
	tfl_predict.cc
;
LINKLIBS on tfl_interp.exe +=
    $(WORK_HOME)/tensorflow_src/tensorflow/lite/tools/make/gen/windows_x86_64/lib/libtensorflow-lite.a
    -lpthread -lm -lz -ldl -lmman -ljpeg -lgdi32
;
InstallBin priv : tfl_interp.exe ;

#Main AllTests.exe :
#	t/AllTests.cc
#	t/tfl_interp_test.cc
#	tfl_interp.cc
#	tfl_predict.cc
#;
#LINKLIBS on AllTests.exe +=
#    ../tensorflow_src/tensorflow/lite/tools/make/gen/windows_x86_64/lib/libtensorflow-lite.a
#    -lmman -ljpeg -lgdi32
#    -lCppUTest -lCppUTestExt
#    #-lpthread -lm -lz -ldl
#;
#SubInclude PROJ src ;
